"use client";

import React, { useEffect, useState } from 'react';

interface ZybraLogoLoaderProps {
  size?: 'sm' | 'md' | 'lg';
  className?: string;
}

const ZybraLogoLoader: React.FC<ZybraLogoLoaderProps> = ({
  size = 'md',
  className = ''
}) => {
  // Size mapping
  const sizeMap = {
    sm: 'w-16 h-16',
    md: 'w-24 h-24',
    lg: 'w-32 h-32',
  };

  const [progress, setProgress] = useState(0);

  // Animate the progress from 0 to 100
  useEffect(() => {
    const interval = setInterval(() => {
      setProgress(prev => {
        if (prev >= 100) {
          clearInterval(interval);
          return 0; // Reset to start the animation again
        }
        return prev + 1;
      });
    }, 20); // Adjust speed here (lower = faster)

    return () => clearInterval(interval);
  }, [progress]);

  return (
    <div className={`flex items-center justify-center ${className}`}>
      <div className={`relative ${sizeMap[size]}`}>
        <svg
          width="100%"
          height="100%"
          viewBox="0 0 76 67"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
          className="drop-shadow-lg"
        >
          {/* Background path (dimmed) */}
          <path
            d="M23.3565 1.46275C24.2084 2.26649 26.3142 4.45264 28.0342 6.3173C31.9885 10.6574 34.8981 13.4223 39.1096 16.8462C46.8415 23.1475 56.7596 27.15 70.2623 29.4005C71.8054 29.6577 73.5736 29.9309 74.2006 29.9792L75.3579 30.0917L75.4544 30.8311C75.583 31.7795 75.583 36.9556 75.4383 37.6146L75.3419 38.1451L73.5576 38.0326C54.6699 36.8913 43.6427 33.6603 34.5766 26.6357C30.0596 23.1314 27.134 20.2862 22.9707 15.3191C20.1576 11.9595 16.2515 7.87654 14.2421 6.17263L13.2937 5.36889L14.5636 4.34011C16.7016 2.62013 20.897 0.016037 21.54 -3.8147e-05C21.6686 -3.8147e-05 22.4884 0.659019 23.3565 1.46275ZM7.26574 14.7083C10.561 15.8335 14.7887 18.1965 17.0391 20.1736C17.3445 20.4308 19.2896 22.3598 21.3793 24.4495C23.4529 26.5231 25.9445 28.8539 26.8929 29.6095C33.387 34.7533 39.9616 37.8075 47.3398 39.0613C50.2493 39.5597 53.7697 39.7043 64.9094 39.8169L75.2293 39.9133L75.1329 40.492C74.9239 41.6654 74.6185 43.0961 74.5703 43.1443C74.5381 43.1604 73.4611 43.7391 72.1752 44.3981C67.3528 46.9058 62.5304 49.96 57.6276 53.625C52.2747 57.6436 48.5776 60.1834 45.6198 61.9356C40.3474 65.0219 34.7373 66.6937 31.1205 66.2275C26.0891 65.5845 20.8649 62.7875 14.0653 57.081C11.4612 54.8949 9.62871 53.1749 5.03136 48.6418L1.62354 45.2822L1.18952 43.4497C0.948402 42.4531 0.803728 41.5851 0.868027 41.5208C1.02877 41.36 2.52372 42.1155 4.16333 43.2247C6.20481 44.591 10.2878 47.7738 15.6728 52.2265C23.2118 58.4634 26.4428 60.0388 31.5063 60.0227C35.7179 60.0227 39.8008 58.7528 46.2146 55.4736C49.3652 53.8661 55.6665 50.3136 55.57 50.2171C55.5379 50.185 54.7502 50.5065 53.834 50.9405C49.4295 53.0141 44.5589 54.6698 40.7492 55.3932C38.6756 55.779 35.5732 55.7468 33.4996 55.3128C28.6289 54.3001 24.5138 52.13 17.5214 46.8897C15.3513 45.2662 15.3834 45.2983 11.6541 41.6494C7.60331 37.6789 4.75809 35.6374 1.3342 34.2229L0.0160738 33.6763L0 32.31C0 31.5545 0.0482235 30.5579 0.0964474 30.1078C0.225045 29.1272 0.0160742 29.1433 2.49157 29.8988C4.5652 30.5418 6.57453 31.3777 8.08555 32.2457C9.35544 32.9691 11.622 34.5444 12.2971 35.1552C12.4739 35.316 13.2777 36.0232 14.0653 36.7305C14.869 37.4378 15.8817 38.3541 16.3158 38.7559C20.7684 42.9032 26.8447 46.7932 31.1044 48.2078C37.1164 50.2011 43.0479 50.1046 53.3517 47.806C59.8138 46.3753 69.764 43.7391 70.1658 43.3694C70.2623 43.2729 70.1819 43.2568 69.9247 43.3051C69.0084 43.5301 63.3823 44.3821 60.8908 44.6875C56.3416 45.2501 52.6605 45.4912 48.5454 45.4912C41.2636 45.4912 37.3092 44.6714 31.7474 41.9709C26.7 39.5275 24.6264 37.8397 16.155 29.3201C11.6702 24.8192 10.7861 24.0155 9.27507 23.0028C7.52293 21.8454 5.41715 20.7684 3.60072 20.1093L2.60409 19.7396L3.08633 18.6787C3.52034 17.7142 5.46538 14.1456 5.56182 14.1456C5.5779 14.1456 6.34948 14.4028 7.26574 14.7083Z"
            fill="rgba(255, 255, 255, 0.1)"
          />

          {/* Animated foreground path (white) with clip-path */}
          <clipPath id="progressClip">
            <rect x="0" y="0" width={`${progress}%`} height="100%" />
          </clipPath>

          <path
            d="M23.3565 1.46275C24.2084 2.26649 26.3142 4.45264 28.0342 6.3173C31.9885 10.6574 34.8981 13.4223 39.1096 16.8462C46.8415 23.1475 56.7596 27.15 70.2623 29.4005C71.8054 29.6577 73.5736 29.9309 74.2006 29.9792L75.3579 30.0917L75.4544 30.8311C75.583 31.7795 75.583 36.9556 75.4383 37.6146L75.3419 38.1451L73.5576 38.0326C54.6699 36.8913 43.6427 33.6603 34.5766 26.6357C30.0596 23.1314 27.134 20.2862 22.9707 15.3191C20.1576 11.9595 16.2515 7.87654 14.2421 6.17263L13.2937 5.36889L14.5636 4.34011C16.7016 2.62013 20.897 0.016037 21.54 -3.8147e-05C21.6686 -3.8147e-05 22.4884 0.659019 23.3565 1.46275ZM7.26574 14.7083C10.561 15.8335 14.7887 18.1965 17.0391 20.1736C17.3445 20.4308 19.2896 22.3598 21.3793 24.4495C23.4529 26.5231 25.9445 28.8539 26.8929 29.6095C33.387 34.7533 39.9616 37.8075 47.3398 39.0613C50.2493 39.5597 53.7697 39.7043 64.9094 39.8169L75.2293 39.9133L75.1329 40.492C74.9239 41.6654 74.6185 43.0961 74.5703 43.1443C74.5381 43.1604 73.4611 43.7391 72.1752 44.3981C67.3528 46.9058 62.5304 49.96 57.6276 53.625C52.2747 57.6436 48.5776 60.1834 45.6198 61.9356C40.3474 65.0219 34.7373 66.6937 31.1205 66.2275C26.0891 65.5845 20.8649 62.7875 14.0653 57.081C11.4612 54.8949 9.62871 53.1749 5.03136 48.6418L1.62354 45.2822L1.18952 43.4497C0.948402 42.4531 0.803728 41.5851 0.868027 41.5208C1.02877 41.36 2.52372 42.1155 4.16333 43.2247C6.20481 44.591 10.2878 47.7738 15.6728 52.2265C23.2118 58.4634 26.4428 60.0388 31.5063 60.0227C35.7179 60.0227 39.8008 58.7528 46.2146 55.4736C49.3652 53.8661 55.6665 50.3136 55.57 50.2171C55.5379 50.185 54.7502 50.5065 53.834 50.9405C49.4295 53.0141 44.5589 54.6698 40.7492 55.3932C38.6756 55.779 35.5732 55.7468 33.4996 55.3128C28.6289 54.3001 24.5138 52.13 17.5214 46.8897C15.3513 45.2662 15.3834 45.2983 11.6541 41.6494C7.60331 37.6789 4.75809 35.6374 1.3342 34.2229L0.0160738 33.6763L0 32.31C0 31.5545 0.0482235 30.5579 0.0964474 30.1078C0.225045 29.1272 0.0160742 29.1433 2.49157 29.8988C4.5652 30.5418 6.57453 31.3777 8.08555 32.2457C9.35544 32.9691 11.622 34.5444 12.2971 35.1552C12.4739 35.316 13.2777 36.0232 14.0653 36.7305C14.869 37.4378 15.8817 38.3541 16.3158 38.7559C20.7684 42.9032 26.8447 46.7932 31.1044 48.2078C37.1164 50.2011 43.0479 50.1046 53.3517 47.806C59.8138 46.3753 69.764 43.7391 70.1658 43.3694C70.2623 43.2729 70.1819 43.2568 69.9247 43.3051C69.0084 43.5301 63.3823 44.3821 60.8908 44.6875C56.3416 45.2501 52.6605 45.4912 48.5454 45.4912C41.2636 45.4912 37.3092 44.6714 31.7474 41.9709C26.7 39.5275 24.6264 37.8397 16.155 29.3201C11.6702 24.8192 10.7861 24.0155 9.27507 23.0028C7.52293 21.8454 5.41715 20.7684 3.60072 20.1093L2.60409 19.7396L3.08633 18.6787C3.52034 17.7142 5.46538 14.1456 5.56182 14.1456C5.5779 14.1456 6.34948 14.4028 7.26574 14.7083Z"
            fill="white"
            clipPath="url(#progressClip)"
          />
        </svg>

        {/* Loading text */}
        <div className="absolute bottom-[-24px] left-0 right-0 text-center text-xs text-white/80">
          Loading...
        </div>
      </div>
    </div>
  );
};

export default ZybraLogoLoader;
